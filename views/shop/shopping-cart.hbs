
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700,800">
	<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<script src="https://kit.fontawesome.com/f54d3de4fb.js"></script>
	<title>Shopping cart</title>
	<link rel="shortcut icon" href="/images/icon.png">
	<style>
		body {
			background: #eee;
			margin: 0;
			padding: 0;
			overflow-x: hidden;
		}

		.clearfix {
		content: "";
		display: table;
		clear: both;	
		}

		#site-header, #site-footer {
			background: #fff;
		}

		#site-header {
			margin: 0 0 30px 0;
		}

		#site-header h1 {
			font-size: 31px;
			font-weight: 300;
			padding: 40px 0;
			position: relative;
			margin: 0;
		}

		a {
			color: #000;
			text-decoration: none;

			-webkit-transition: color .2s linear;
			-moz-transition: color .2s linear;
			-ms-transition: color .2s linear;
			-o-transition: color .2s linear;
			transition: color .2s linear;
		}

		a:hover {
			color: #53b5aa;
		}

		#site-header h1 span {
			color: #53b5aa;
		}

		#site-header h1 span {
			background: #fff;
			padding-right: 150px;
			position: absolute;
			left: 217px;

			-webkit-transition: all .2s linear;
			-moz-transition: all .2s linear;
			-ms-transition: all .2s linear;
			-o-transition: all .2s linear;
			transition: all .2s linear;
		}

		#site-header h1:hover , #site-header h1 span.is-open {
			left: 363px;
		}

		#site-header h1 em {
			font-size: 16px;
			font-style: normal;
			vertical-align: middle;
		}

		.container {
			font-family: 'Open Sans', sans-serif;
			margin: 0 auto;
			width: 980px;
		}

		#cart {
			width: 100%;
		}

		#cart h1 {
			font-weight: 300;
		}

		#cart a {
			color: #000000;
			text-decoration: none;

			-webkit-transition: color .2s linear;
			-moz-transition: color .2s linear;
			-ms-transition: color .2s linear;
			-o-transition: color .2s linear;
			transition: color .2s linear;
		}

		#cart a:hover {
			color: #000;
		}

		.product.removed {
			margin-left: 980px !important;
			opacity: 0;
		}

		.product {
			border: 1px solid #eee;
			margin: 20px 0;
			width: 100%;
			height: 195px;
			position: relative;

			-webkit-transition: margin .2s linear, opacity .2s linear;
			-moz-transition: margin .2s linear, opacity .2s linear;
			-ms-transition: margin .2s linear, opacity .2s linear;
			-o-transition: margin .2s linear, opacity .2s linear;
			transition: margin .2s linear, opacity .2s linear;
		}

		.product img {
			height: 100%;
			margin: 0px 36px;
		}

		.product header, .product .content {
			background-color: #fff;
			border: 1px solid #ccc;
			border-style: none none solid none;
			float: left;
		}

		.product header {
			background: #00000017;
			margin: 0 1% 20px 0;
			overflow: hidden;
			padding: 0;
			position: relative;
			width: 24%;
			height: 195px;
		}

		.product header:hover img {
			opacity: .7;
		}

		.product header:hover h3 {
			bottom: 73px;
		}

		.product header h3 {
			background: #000000;
			color: #fff;
			font-size: 22px;
			font-weight: 300;
			line-height: 49px;
			margin: 0;
			padding: 0 30px;
			position: absolute;
			bottom: -50px;
			right: 0;
			left: 0;
			background-color: #00000080;
			-webkit-transition: bottom .2s linear;
			-moz-transition: bottom .2s linear;
			-ms-transition: bottom .2s linear;
			-o-transition: bottom .2s linear;
			transition: bottom .2s linear;
		}

		.remove {
			cursor: pointer;
		}

		.product .content {
			box-sizing: border-box;
			-moz-box-sizing: border-box;
			height: 140px;
			padding: 0 20px;
			width: 75%;
		}

		.product h1 {
			color: #130c0c;
			font-size: 25px;
			font-weight: 300;
			margin: 17px 0 20px 0;
		}

		.product footer.content {
			height: 50px;
			margin: 6px 0 0 0;
			padding: 0;
		}

		.product footer .price {
			background: #fcfcfc;
			color: #000;
			float: right;
			font-size: 15px;
			font-weight: 300;
			line-height: 49px;
			margin: 0;
			padding: 0 30px;
		}

		.product footer .full-price {
			background: black;
			color: #fff;
			float: right;
			font-size: 22px;
			font-weight: 300;
			line-height: 49px;
			margin: 0;
			padding: 0 30px;

			-webkit-transition: margin .15s linear;
			-moz-transition: margin .15s linear;
			-ms-transition: margin .15s linear;
			-o-transition: margin .15s linear;
			transition: margin .15s linear;
		}

		.qt, .qt-plus, .qt-minus {
			display: block;
			float: left;
		}

		.qt {
			font-size: 19px;
			line-height: 50px;
			width: 70px;
			text-align: center;
		}

		.qt-plus, .qt-minus {
			border: none;
			font-size: 30px;
			font-weight: 300;
			height: 100%;
			padding: 0 20px;
			-webkit-transition: background .2s linear;
			-moz-transition: background .2s linear;
			-ms-transition: background .2s linear;
			-o-transition: background .2s linear;
			transition: background .2s linear;
		}

		.qt-plus:hover, .qt-minus:hover {
			background: #707070;
			color: #fff;
			cursor: pointer;
		}

		.qt-plus {
			line-height: 50px;
		}

		.qt-minus {
			line-height: 47px;
		}

		#site-footer {
			margin: 30px 0 0 0;
		}

		#site-footer {
			padding: 40px;
		}

		#site-footer h1 {
			background: #fcfcfc;
			border: 1px solid #ccc;
			border-style: none none solid none;
			font-size: 24px;
			font-weight: 300;
			margin: 0 0 7px 0;
			padding: 14px 40px;
			text-align: center;
		}

		#site-footer h2 {
			font-size: 24px;
			font-weight: 300;
			margin: 10px 0 0 0;
		}

		#site-footer h3 {
			font-size: 19px;
			font-weight: 300;
			margin: 15px 0;
		}

		.left {
			float: left;
		}

		.right {
			float: right;
		}

		.btn {
			background: black;
			border: 1px solid #999;
			border-style: none none solid none;
			cursor: pointer;
			display: block;
			color: #fff;
			font-size: 20px;
			font-weight: 300;
			padding: 16px 0;
			width: 290px;
			text-align: center;

			-webkit-transition: all .2s linear;
			-moz-transition: all .2s linear;
			-ms-transition: all .2s linear;
			-o-transition: all .2s linear;
			transition: all .2s linear;
		}

		.btn:hover {
			color: #fff;
			background: #616161;
		}

		.type {
			background: #fcfcfc;
			font-size: 13px;
			padding: 10px 16px;
			left: 100%;
		}

		.type, .color {
			border: 1px solid #ccc;
			border-style: none none solid none;
			position: absolute;
		}

		.color {
			width: 40px;
			height: 40px;
			right: -40px;
		}


		.minused {
			margin: 0 50px 0 0 !important;
		}

		.added {
			margin: 0 -50px 0 0 !important;
		}
	</style>
</head>
<body>
	
	<header id="site-header">
		<div class="container">
			<h1><i class="fas fa-shopping-cart"></i>Shopping cart</h1>
		</div>
	</header>
	{{# if products }}
	{{# each products }}
	<div class="container">

		<section id="cart"> 
			<article class="product">
				<header>
					<a href="/remove/{{this.item._id}}" class="remove">
						<img src="/images/{{ this.item.imagePath }}" alt="">

						<h3>Remove</h3>
					</a>
				</header>

				<div class="content">

					<h1>{{ this.item.title }}</h1>

					{{ this.item.description }}

				</div>

				<footer class="content">
					<a href="/reduce/{{this.item._id}}" class="qt-minus">-</a>
					<a class="qt">{{ this.qty }}</a>
					<a href="/update/{{this.item._id}}" class="qt-plus">+</a>

					<h2 class="full-price">
						{{ this.price }}€
					</h2>

					<h2 class="price">
						{{ this.item.price }}€
					</h2>
				</footer>
			</article>

		</section>

	</div>
	{{/each}}
	{{ else }}
		<div class="container">
			
				<h2>No Products in Cart</h2>
			
		</div>
	{{/if}}
	<footer id="site-footer">
		<div class="container clearfix">

			<div class="left">
				<h3 class="shipping">Free Ship</h3>
				<hr>
				<a href="/" class="btn">
				<i class="fas fa-shopping-bag"></i>
				Continue Shopping</a>				
			</div>

			<div class="right">
				<h1 class="total">Total: <span>{{ totalPrice }}</span> $</h1>
				<a href="/checkout" class="btn"><i class="fab fa-cc-stripe"></i>
				Checkout</a>
				
			</div>

		</div>
	</footer>

</body>
</html>



















{{!-- {{# if products }}
    <div class="row">
        <div class="col-sm-6 col-md-6 col-md-offset-3 col-sm-offset-3">
            <ul class="list-group">
                {{# each products }}
                    <li class="list-group-item">
                        <span class="badge">{{ this.qty }}</span>
                        <strong>{{ this.item.title }}</strong>
                        <span class="label label-success">${{ this.price }}</span>
                        <div class="btn-group">
                            <button class="btn btn-primary btn-xs dropdown-toggle" type="button" data-toggle="dropdown">Action <span class="caret"></span></button>
                            <ul class="dropdown-menu">
																	
                                <li><a href="/reduce/{{this.item._id}}">Remove 1</a></li>
                                <li><a href="/remove/{{this.item._id}}">Remove All</a></li>
																<li><a href="/update/{{this.item._id}}">Update</a></li>
                            </ul>
                        </div>
                    </li>
                {{/each}}
            </ul>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-6 col-md-6 col-md-offset-3 col-sm-offset-3">
            <strong>Total: {{ totalPrice }}</strong>
        </div>
    </div>
    <hr>
    <div class="row">
        <div class="col-sm-6 col-md-6 col-md-offset-3 col-sm-offset-3">
            <a href="/checkout" type="button" class="btn btn-success">Checkout</a>
        </div>
    </div>
{{ else }}
    <div class="row">
        <div class="col-sm-6 col-md-6 col-md-offset-3 col-sm-offset-3">
            <h2>No Items in Cart</h2>
        </div>
    </div>
{{/if}} --}}


{{!-- <style>
body {
	margin: 0;
	padding: 0;
	overflow-x: hidden;
}

.clearfix {
  content: "";
  display: table;
  clear: both;	
}

#site-header, #site-footer {
	background: #fff;
    
}

#site-header {
	margin: -20px 0 -25px 0;
}

#site-header h1 {
	font-size: 31px;
	font-weight: 300;
	padding: 40px 0;
	position: relative;
	margin: 0;
}

a {
	color: #000;
	text-decoration: none;

	-webkit-transition: color .2s linear;
	-moz-transition: color .2s linear;
	-ms-transition: color .2s linear;
	-o-transition: color .2s linear;
	transition: color .2s linear;
}

a:hover {
	color: #333333;
}

#site-header h1 span {
	color: #333333;
}


#site-header h1 em {
	font-size: 16px;
	font-style: normal;
	vertical-align: middle;
}

.container_cart {
	font-family: 'Montserrat', sans-serif;
	margin: 0 auto;
	width: 980px;
}

#cart {
	width: 100%;
}

#cart h1 {
	font-weight: 300;
}

#cart a {
	color: #333333;
	text-decoration: none;

	-webkit-transition: color .2s linear;
	-moz-transition: color .2s linear;
	-ms-transition: color .2s linear;
	-o-transition: color .2s linear;
	transition: color .2s linear;
}

#cart a:hover {
	color: #000;
}

.product.removed {
	margin-left: 980px !important;
	opacity: 0;
}

.product {
	border: 1px solid #eee;
	margin: 20px 0;
	width: 100%;
	height: 195px;
	position: relative;

	-webkit-transition: margin .2s linear, opacity .2s linear;
	-moz-transition: margin .2s linear, opacity .2s linear;
	-ms-transition: margin .2s linear, opacity .2s linear;
	-o-transition: margin .2s linear, opacity .2s linear;
	transition: margin .2s linear, opacity .2s linear;
}

.product img {
		max-height: 200px;
    max-width: 200px;
    display: block;
    margin-left: auto;
    margin-right: auto;
}

.product header, .product .content {
	background-color: #fff;
	border: 1px solid #ccc;
	border-style: none none solid none;
	float: left;
}

.product header {
	background: whitesmoke;
	margin: 0 1% 20px 0;
	overflow: hidden;
	padding: 0;
	position: relative;
	width: 24%;
	height: 195px;
}

.product header:hover img {
	opacity: .7;
}

.product header:hover h3 {
	bottom: 73px;
}

.product header h3 {
	background: #333333;
	color: #fff;
	font-size: 22px;
	font-weight: 300;
	line-height: 49px;
	margin: 0;
	padding: 0 30px;
	position: absolute;
	bottom: -50px;
	right: 0;
	left: 0;

	-webkit-transition: bottom .2s linear;
	-moz-transition: bottom .2s linear;
	-ms-transition: bottom .2s linear;
	-o-transition: bottom .2s linear;
	transition: bottom .2s linear;
}

.remove {
	cursor: pointer;
}

.product .content {
	box-sizing: border-box;
	-moz-box-sizing: border-box;
	height: 140px;
	padding: 0 20px;
	width: 75%;
}

.product h1 {
	color: #333333;
	font-size: 25px;
	font-weight: 300;
	margin: 17px 0 20px 0;
}

.product footer.content {
	height: 50px;
	margin: 6px 0 0 0;
	padding: 0;
}

.product footer .price {
	background: #fcfcfc;
	color: #000;
	float: right;
	font-size: 15px;
	font-weight: 300;
	line-height: 49px;
	margin: 0;
	padding: 0 30px;
}

.product footer .full-price {
	background: #333333;
	color: #fff;
	float: right;
	font-size: 22px;
	font-weight: 300;
	line-height: 49px;
	margin: 0;
	padding: 0 30px;

	-webkit-transition: margin .15s linear;
	-moz-transition: margin .15s linear;
	-ms-transition: margin .15s linear;
	-o-transition: margin .15s linear;
	transition: margin .15s linear;
}

.qt, .qt-plus, .qt-minus {
	display: block;
	float: left;
}

.qt {
	font-size: 19px;
	line-height: 50px;
	width: 70px;
	text-align: center;
}

.qt-plus, .qt-minus {
	background: #fcfcfc;
	border: none;
	font-size: 30px;
	font-weight: 300;
	height: 100%;
	padding: 0 20px;
	-webkit-transition: background .2s linear;
	-moz-transition: background .2s linear;
	-ms-transition: background .2s linear;
	-o-transition: background .2s linear;
	transition: background .2s linear;
}

.qt-plus:hover, .qt-minus:hover {
	background: #333333;
	color: #fff;
	cursor: pointer;
}

.qt-plus {
	line-height: 50px;
}

.qt-minus {
	line-height: 47px;
}

#site-footer {
	margin: 30px 0 0 0;
}

#site-footer {
	padding: 40px;
}

#site-footer h1 {
	background: #fcfcfc;
	border: 1px solid #ccc;
	border-style: none none solid none;
	font-size: 24px;
	font-weight: 300;
	margin: 0 0 7px 0;
	padding: 14px 40px;
	text-align: center;
}

#site-footer h2 {
	font-size: 24px;
	font-weight: 300;
	margin: 10px 0 0 0;
}

#site-footer h3 {
	font-size: 19px;
	font-weight: 300;
	margin: 15px 0;
}

.left {
	float: left;
}

.right {
	float: right;
}

.btn {
	background: #333333;
	border: 1px solid #999;
	border-style: none none solid none;
	cursor: pointer;
	display: block;
	color: #fff;
	font-size: 20px;
	font-weight: 300;
	padding: 16px 0;
	width: 290px;
	text-align: center;

	-webkit-transition: all .2s linear;
	-moz-transition: all .2s linear;
	-ms-transition: all .2s linear;
	-o-transition: all .2s linear;
	transition: all .2s linear;
}

.btn:hover {
	color: #fff;
	background: #1b1b1b;
}

.type {
	background: #fcfcfc;
	font-size: 13px;
	padding: 10px 16px;
	left: 100%;
}

.type, .color {
	border: 1px solid #ccc;
	border-style: none none solid none;
	position: absolute;
}

.color {
	width: 40px;
	height: 40px;
	right: -40px;
}

.red {
	background: #cb5a5e;
}

.yellow {
	background: #f1c40f;
}

.blue {
	background: #3598dc;
}

.minused {
	margin: 0 50px 0 0 !important;
}

.added {
	margin: 0 -50px 0 0 !important;
}


</style>

<div class="container_cart">
<header id="site-header">
		<div class="container_cart">
			<h1 class="text-center">Shopping cart </h1>				
		</div>
</header>
{{# each products }}
<div class="container_cart">

		<section id="cart"> 
			<article class="product">
				<header>
					<a href="/remove/{{this.item._id}}" class="remove">
						<img src="{{ this.item.imagePath }}" alt="">

						<h3>Remove</h3>
					</a>
				</header>

				<div class="content">

					<h1>{{ this.item.title }}</h1>

					{{ this.item.description }}

				</div>

				<footer class="content">

					<span href="/reduce/{{this.item._id}}" class="qt-minus">-</span>
					<span class="qt">{{ this.qty }}</span>
					<span href="/update/{{this.item._id}}" class="qt-plus">+</span>
					<a href="/reduce/{{this.item._id}}" class="qt-minus">-</a>
					<span class="qt">{{ this.qty }}</span>
					<a href="/update/{{this.item._id}}" class="qt-plus">+</a>

					<h2 class="full-price">
						{{ this.price }}€
					</h2>

					<h2 class="price">
						{{ this.item.price }}€
					</h2>
				</footer>
			</article>

		</section>

</div>
{{/each}}
<footer id="site-footer">
		<div class="container_cart clearfix">

			<div class="left">
				<h2 class="subtotal">Subtotal: <span>0</span>€</h2>
				<h3 class="tax">Taxes (5%): <span>0</span>€</h3>
				<h3 class="shipping">Shipping: <span>5.00</span>€</h3>
			</div>

			<div class="right">
				<h1 class="total">Total: <span>{{ totalPrice }}</span> €</h1>
				<a href="/checkout" class="btn">Checkout</a>
			</div>

		</div>
</footer>
</div>

<script>

var check = false;

function changeVal(el) {
  var qt = parseFloat(el.parent().children(".qt").html());
  var price = parseFloat(el.parent().children(".price").html());
  var eq = Math.round(price * qt * 100) / 100;
  
  el.parent().children(".full-price").html( eq + "€" );
  
  changeTotal();			
}

function changeTotal() {
  
  var price = 0;
  
  $(".full-price").each(function(index){
    price += parseFloat($(".full-price").eq(index).html());
  });
  
  price = Math.round(price * 100) / 100;
  var tax = Math.round(price * 0.05 * 100) / 100
  var shipping = parseFloat($(".shipping span").html());
  var fullPrice = Math.round((price + tax + shipping) *100) / 100;
  
  if(price == 0) {
    fullPrice = 0;
  }
  
  $(".subtotal span").html(price);
  $(".tax span").html(tax);
  $(".total span").html(fullPrice);
}

$(document).ready(function(){
  
  $(".remove").click(function(){
    var el = $(this);
    el.parent().parent().addClass("removed");
    window.setTimeout(
      function(){
        el.parent().parent().slideUp('slow', function() { 
          el.parent().parent().remove(); 
          if($(".product").length == 0) {
            if(check) {
              $("#cart").html("<h1>The shop does not function, yet!</h1><p>If you liked my shopping cart, please take a second and heart this Pen on <a href='https://codepen.io/ziga-miklic/pen/xhpob'>CodePen</a>. Thank you!</p>");
            } else {
              $("#cart").html("<h1>No products!</h1>");
            }
          }
          changeTotal(); 
        });
      }, 200);
  });
  
  $(".qt-plus").click(function(){
    $(this).parent().children(".qt").html(parseInt($(this).parent().children(".qt").html()) + 1);
    
    $(this).parent().children(".full-price").addClass("added");
    
    var el = $(this);
    window.setTimeout(function(){el.parent().children(".full-price").removeClass("added"); changeVal(el);}, 150);
  });
  
  $(".qt-minus").click(function(){
    
    child = $(this).parent().children(".qt");
    
    if(parseInt(child.html()) > 1) {
      child.html(parseInt(child.html()) - 1);
    }
    
    $(this).parent().children(".full-price").addClass("minused");
    
    var el = $(this);
    window.setTimeout(function(){el.parent().children(".full-price").removeClass("minused"); changeVal(el);}, 150);
  });
  
  window.setTimeout(function(){$(".is-open").removeClass("is-open")}, 1200);
  
  $(".btn").click(function(){
    check = true;
    $(".remove").click();
  });
});

</script> --}}
